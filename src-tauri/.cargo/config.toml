# iOS Build Configuration for OpenCode Nexus
# Fixes cross-compilation linker issues
# NOTE: Default build target is NOT set here to allow CI/CD to build for multiple targets
# Use explicit --target flags when building for iOS

[target.aarch64-apple-ios]
rustflags = [
    "-C", "link-arg=-L$(SDKROOT)/usr/lib",
    "-C", "link-arg=-L$(SDKROOT)/usr/lib/swift",
    "-C", "link-arg=-framework", "-C", "link-arg=Foundation",
    "-C", "link-arg=-framework", "-C", "link-arg=UIKit",
    "-C", "link-arg=-framework", "-C", "link-arg=CoreGraphics",
    "-C", "link-arg=-framework", "-C", "link-arg=Metal",
    "-C", "link-arg=-framework", "-C", "link-arg=QuartzCore",
    "-C", "link-arg=-framework", "-C", "link-arg=Security",
    "-C", "link-arg=-framework", "-C", "link-arg=WebKit"
]

[target.aarch64-apple-ios-sim]
rustflags = [
    "-C", "link-arg=-L$(SDKROOT)/usr/lib",
    "-C", "link-arg=-L$(SDKROOT)/usr/lib/swift",
    "-C", "link-arg=-framework", "-C", "link-arg=Foundation",
    "-C", "link-arg=-framework", "-C", "link-arg=UIKit",
    "-C", "link-arg=-framework", "-C", "link-arg=CoreGraphics",
    "-C", "link-arg=-framework", "-C", "link-arg=Metal",
    "-C", "link-arg=-framework", "-C", "link-arg=QuartzCore",
    "-C", "link-arg=-framework", "-C", "link-arg=Security",
    "-C", "link-arg=-framework", "-C", "link-arg=WebKit"
]

[target.x86_64-apple-ios]
rustflags = [
    "-C", "link-arg=-L$(SDKROOT)/usr/lib",
    "-C", "link-arg=-L$(SDKROOT)/usr/lib/swift",
    "-C", "link-arg=-framework", "-C", "link-arg=Foundation",
    "-C", "link-arg=-framework", "-C", "link-arg=UIKit",
    "-C", "link-arg=-framework", "-C", "link-arg=CoreGraphics",
    "-C", "link-arg=-framework", "-C", "link-arg=Metal",
    "-C", "link-arg=-framework", "-C", "link-arg=QuartzCore",
    "-C", "link-arg=-framework", "-C", "link-arg=Security",
    "-C", "link-arg=-framework", "-C", "link-arg=WebKit"
]

[env]
# iOS-specific environment variables are set in the [target.aarch64-apple-ios] section
# to avoid interfering with other targets
